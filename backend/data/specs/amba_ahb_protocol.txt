AMBA AHB Protocol Specification Summary

The AMBA AHB (Advanced High-performance Bus) protocol is a synchronous, high-performance bus primarily used for connecting processors, on-chip memories, and high-bandwidth peripherals in System-on-Chip (SoC) designs. Its timing is fundamentally driven by a single clock edge, enabling efficient integration and predictable operation.

### Key Signals and Their Timing Characteristics:

All signal transitions in the AMBA AHB protocol are referenced to the rising edge of the central bus clock, **HCLK**. This single-clock-edge operation simplifies timing analysis and integration.

The AHB protocol employs a pipelined architecture, separating the address and control phase from the data phase. This allows for increased bandwidth by overlapping operations.

**1. Clock and Reset Signals:**
*   **HCLK (Bus Clock):** This is the primary clock signal that times all bus transfers. All other signal timings are directly related to its rising edge.
*   **HRESETn (Reset):** An active LOW signal used to reset the system and the bus. This is the only active LOW signal in the AHB protocol. Timing parameters such as setup and hold times (e.g., Tisrst, Tihrst) define its relationship to HCLK during deassertion.

**2. Address and Control Signals (Driven by Master):**
These signals typically become valid on a rising edge of HCLK and remain stable for the duration of the cycle, allowing slaves to decode and prepare for the data transfer. They are generally generated by the bus master. The timing of these signals is aligned with the timing of the address bus.
*   **HADDR[31:0] (Address Bus):** The 32-bit system address bus, driven by the bus master, indicates the memory address for the current transfer.
*   **HTRANS[1:0] (Transfer Type):** Indicates the type of the current transfer (NONSEQUENTIAL, SEQUENTIAL, IDLE, or BUSY).
*   **HWRITE (Transfer Direction):** When HIGH, indicates a write transfer; when LOW, indicates a read transfer.
*   **HSIZE[2:0] (Transfer Size):** Specifies the size of the transfer (e.g., byte, halfword, word).
*   **HBURST[2:0] (Burst Type):** Indicates if the transfer is part of a burst, specifying burst length (4, 8, 16 beats, or undefined) and type (incrementing or wrapping).
*   **HPROT[3:0] (Protection Control):** Provides information about the access, such as whether it's an opcode fetch or data access, and user or privileged mode.

**3. Write Data Signals (Driven by Master):**
*   **HWDATA[n-1:0] (Write Data Bus):** Carries the data from the master to the slave during write operations. The setup and hold times (Tiswd, Tihwd) define its validity relative to HCLK.

**4. Read Data and Response Signals (Driven by Slave):**
These signals are typically driven by the selected slave in response to the address and control signals from the master.
*   **HRDATA[n-1:0] (Read Data Bus):** Carries the data from the slave to the master during read operations.
*   **HREADY (Transfer Done/Ready):** Driven by the slave, this signal indicates whether the transfer has finished. A HIGH HREADY signal allows the transfer to complete. If HREADY is driven LOW, the slave inserts wait states, extending the transfer for one or more HCLK cycles until it is ready. Setup and hold times (Tisrdy, Tihrdy) apply to HREADY as an input to the master.
*   **HRESP[1:0] (Transfer Response):** Provides additional status information about the transfer (OKAY, ERROR, RETRY, or SPLIT). Timing parameters like Tovrsp and Tohrsp define its validity after HCLK.

**5. Arbitration Signals (Involving Arbiter):**
In multi-master systems, an arbiter manages access to the bus.
*   **HBUSREQx (Bus Request):** A signal from master 'x' to the arbiter, requesting bus access.
*   **HGRANTx (Bus Grant):** From the arbiter to master 'x', indicating that the master has been granted the bus. Ownership of address/control signals changes when both HREADY and HGRANT are HIGH.
*   **HLOCK (Locked Transfer):** When HIGH, indicates the master requires locked access, preventing other masters from gaining the bus.

**6. Slave Select Signals (Driven by Decoder):**
*   **HSELx (Slave Select):** Driven by an address decoder, this signal indicates that the current transfer is intended for the selected slave 'x'. Setup and hold times (Tissel, Tihsel) define its relationship to HCLK.

**Timing of Address and Data Phases:**
In a typical AHB transfer, the address and control signals for a transfer (HADDR, HTRANS, HWRITE, HSIZE, HBURST, HPROT) are presented on one rising edge of HCLK (the address phase). The corresponding write data (HWDATA) is also presented by the master at this time for a write transfer. The slave then responds with HREADY and HRESP (and HRDATA for a read) on a subsequent rising edge of HCLK (the data phase). The pipelined nature means that while one transfer's data phase is occurring, the next transfer's address phase can begin.
